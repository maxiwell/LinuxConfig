#!/bin/bash

# Script to mark a file or folder to sync with git
# Only works if that file is in the $HOME folder

# -c : check if files are synchronized

GITDIR=$HOME/.config/linuxConfig/home

if [[ $1 == '' ]]; then
    echo "File or folder missing..."
else
    if [[ $1 == '-c' ]]; then
        echo -e "\nCheck mode: |*| Sync  | | Unsync\n"
        if [[ $2 == '' ]]; then
            echo "File of folder missing..."
        else
            shift # discards the $1 (-c) args
            for i; do
			   if [[ -d	$PWD/$i ]]; then
				   if [[ -d $GITDIR/${PWD#$HOME}/$i ]]; then
					   	echo "|*| $GITDIR/${PWD#$HOME}/$i"
					else
						echo "| | $GITDIR/${PWD#$HOME}/$i"
					fi
			   else
               		if [[ -e $GITDIR/${PWD#$HOME}/$i ]]; then # if file exists
               		    echo "|*| $GITDIR/${PWD#$HOME}/$i"
               		else
						if [[ -e $GITDIR/${PWD#$HOME}/$i--${HOSTNAME} ]]; then
							echo "|*| $GITDIR/${PWD#$HOME}/$i--${HOSTNAME}"
						else
    	           		    echo "| | $GITDIR/${PWD#$HOME}/$tmp"
						fi
               		fi
			   fi
            done
            echo ""
        fi
    else
        for i; do 
           cp -r  $PWD/$i $GITDIR/${PWD#$HOME}
           echo "$GITDIR/${PWD#$HOME}"
        done
    fi
fi





