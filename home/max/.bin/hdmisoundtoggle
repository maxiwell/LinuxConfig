#!/bin/bash

#
# To list cards and profiles
# $ pacmd list
#


if [ "$1" == "-c" ]; 
then # connect mode

    hdmi_on=`xrandr | grep -c "HDMI2 connected"`
    if [ $hdmi_on -eq 1 ]; then
        pactl set-card-profile 1 output:hdmi-stereo
        echo "card: hdmi-stereo"
    else
        pactl set-card-profile 1 output:analog-stereo+input:analog-stereo
        echo "card: analog-stereo"
    fi

else  # toggle mode

    mode=`pactl stat | grep -c hdmi-stereo`
    if [ $mode -eq 0 ]; then
         pactl set-card-profile 1 output:hdmi-stereo
         echo "card: hdmi-stereo"
    else   
         pactl set-card-profile 1 output:analog-stereo+input:analog-stereo
         echo "card: analog-stereo"
    fi

fi
